<%- include('./partials/header.ejs'); -%>

<div class="container">
    <div class="row justify-content-center mt-5 mb-1">
        <div class="col py-0 px-2">
            <h2 class="text-color-alt title-font-op text-uppercase ps-2 mb-0">Edit Collection Details</h2>
        </div>
    </div>

    <form action="/plot/edit-plot/<%= plot.id %>" enctype="multipart/form-data" method="POST">
        
        <div class="row g-3">
            <div class="col-xl-7">
                <!-- image -->
                <div class="image-card card img-fluid border-light mt-2 mb-3">
                    <img src="<%= plot.image %>" class="card-img plot-image" alt="Plot Image">
                    <div class="d-flex align-items-end card-img-overlay p-0">
                        <div class="d-flex justify-content-start row m-3">
                            <button 
                                type="button"
                                class="btn btn-dark" 
                                data-bs-toggle="modal" 
                                data-bs-target="#plotImgEdit">
                                <i class="far fa-image fa-lg"></i>
                                Replace Image
                            </button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-xl-5">
                <!-- coll name -->
                <div class="form-floating mt-2 mb-3">
                    <input type="text" class="form-control" id="plotName" name="plotName" value="<%= plot.name %>" placeholder="plot name">
                    <label for="plotName">Collection Name<span class="req-prop ps-1">*</span></label>
                </div>
                <!-- short desc -->
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="description" name="description" value="<%= plot.desc %>" placeholder="description">
                    <label for="description">Short Description</label>
                </div>
                <!-- notes -->
                <div>
                    <label for="notes" class="form-label">Notes</label>
                </div>
                <div class="input-group mb-3">  
                    <span class="input-group-text text-white"><i class="fas fa-pencil-alt fa-lg"></i></span>
                    <textarea class="form-control" id=notes name="notes" rows= 5><%= plot.notes %></textarea>
                </div>
            </div>
        </div>

            <div class="mt-3">
                <!-- save/close -->
                <button class="btn btn-primary" type="submit" value="Upload">Save Changes</button>
                <!-- <button type="reset" class="btn cancel" onclick="closeForm()">Close</button> -->
                <a href="/plot/<%= plot.id %>" class="btn btn-secondary" role="button" >
                Cancel
                </a>
            </div>
    </form>

</div>

<!-- ------------- modal --------- -->
<div class="modal fade" id="plotImgEdit" tabindex="-1" aria-labelledby="editImgLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title display-6 ps-4" id="editImgLabel"><strong>Replace Collection Profile Image</strong></h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
            <p class="p-4">
                <em>This action <strong>deletes</strong> the current saved photo from the system and replaces it with the newly uploaded image (Note: you can always save a new image, but replacement cannot be undone)</em>
            </p>
            <form class="needs-validation p-4" action="/plot/edit-image/<%= plot.id %>" enctype="multipart/form-data" method="POST" novalidate>
                <div>
                    <!-- image upload -->
                    <div><label for="imgUpload">New Image</label></div>
                    <div class="input-group has-validation mb-3">
                        <div class="input-group-text text-white" for="imgUpload"><i class="fas fa-image fa-lg"></i></div>
                        <input type="file" class="form-control" id="imageUpload" name="file" aria-label="image file" required>
                        <div class="invalid-feedback">
                            * If you want to change the plot image, please choose a file
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-end">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal"><i class="fas fa-chevron-left pe-2"></i>Cancel</button>
                    <button class="btn btn-primary" type="submit">Replace Image<i class="fas fa-chevron-right ps-2"></i></button>
                </div>
            </form>
            
            </div>
            <div class="modal-footer">
                
                
            </div>
        </div>
    </div>
</div>

<%- include('./partials/footer.ejs'); -%>